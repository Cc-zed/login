# import pickle

# original = {"Ukraine": "Kyiv", "Poland":"Warshav","Switherland":"Zurich","Germany":"Berlin","Brazil":"Brazilia"}

# pickled = pickle.dumps(original)

# identical = pickle.loads(pickled)
# print("Original: ", original, "\nPickled: ", pickled, "\nIdentical: ", identical)

from tkinter import *
from tkinter import messagebox
import pickle

def registr():
    label_error = None

    frame = Frame(root, bd=10)
    frame.place(relx=0.3, rely=0.1, relwidth=0.4, relheight=0.8, anchor='n')

    label = Label(frame, text="Sign Up", font="16")
    label.place(relwidth=1, relheight=0.1)

    label_login = Label(frame, text="Login: ")
    label_login.place(rely=0.075, relwidth= 0.35, relheight=0.1)

    login_register = Entry(frame)
    login_register.place(relx=0.3, rely=0.1, relwidth=0.55, relheight=0.05)


    label_password1 = Label(frame, text="Password: ")
    label_password1.place(rely=0.175, relheight=0.1, relwidth=0.35)

    password1 = Entry(frame, show="*")
    password1.place(rely=0.2, relheight=0.05, relwidth=0.55, relx=0.3)

    label_password2 = Label(frame, text="Password: ")
    label_password2.place(rely=0.275, relheight=0.1, relwidth=0.35)

    password2 = Entry(frame, show="*")
    password2.place(rely=0.3, relheight=0.05, relwidth=0.55, relx=0.3)

    button = Button(frame, text="Sign up", command=lambda: signup())
    button.place(relx=0.3, rely=0.9, relwidth=0.4, relheight=0.05)

    def signup():
        nonlocal label_error
        error = ""

        if label_error:
            label_error.destroy()

        if len(login_register.get()) == 0:
            error - "*login error"
        elif len(password1.get()) < 5:
            error = "*password is too short."
        elif not password1.get() == password2.get():
            error = "*password error"
        else:
            save()
        label_error = Label(frame, text=error, fg="pink")
        label_error.place(rely=0.7)



    def save():
        data = dict()
        data[login_register.get()] = password1.get()
        f = open("login.txt", "wb")
        pickle.dump(data, f)
        f.close()
        login_form()

        

def login_form():
    frame = Frame(root, bd=10)
    frame.place(relx=0.3, rely=0.1, relwidth=0.4, relheight=0.8, anchor='n')

    label = Label(frame, text="Sign in")
    label.place(relwidth= 1, relheight=0.1)

    label_login = Label(frame, text="Login: ")
    label_login.place(rely=0.075, relwidth= 0.35, relheight=0.1)

    enter_login = Entry(frame)
    enter_login.place(relx=0.3, rely=0.1, relwidth=0.55, relheight=0.05)


    label_password = Label(frame, text="Password: ")
    label_password.place(rely=0.175, relheight=0.1, relwidth=0.35)

    enter_password = Entry(frame, show="*")
    enter_password.place(rely=0.2, relheight=0.05, relwidth=0.55, relx=0.3)

    button = Button(frame, text="Sign in", command=lambda: login_password())
    button.place(relx=0.3, rely=0.9, relwidth=0.4, relheight=0.05)



    def login_password():
        f = open("login.txt", "rb")
        a = pickle.load(f)
        f.close()
        if enter_login.get() in a and enter_password.get() == a[enter_login.get()]:
            messagebox.showinfo("Welcome", "Wonderhoy!")
        else:
            messagebox.showerror("Error!", "Invalid login or password")

root = Tk()
root.title("Login Form")
root.geometry("1000x700")
root.resizable(False,False)

root.option_add("*Font", "Arial")
root.option_add("*Background", "white")

img = PhotoImage(file="bg.gif")
background_label = Label(root, image=img)
background_label.place(relwidth=1,relheight=1)

button_signup = Button(root, text="Sign Up", bg="white", fg="gray", command=registr)
button_signup.place(relx=0.6, rely=0.1, relwidth=0.2)

button_signin = Button(root, text="Sign In", bg="white", fg="gray", command=login_form)
button_signin.place(relx=0.6, rely=0.15, relwidth=0.2)



root.mainloop()
